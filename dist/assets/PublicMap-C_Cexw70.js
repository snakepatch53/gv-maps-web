import{g as d,j as e,L as p,F as h,d as m,u as f,r as o,c as j,t as u,h as g,i as w}from"./index-B8Ob7Y2_.js";import{M,a as N,b as v,P as x,c as y}from"./MapLayerControl-2VsRAu0_.js";async function P(s){return await d({resource:"combos/get-public-map/"+s,all:!0})}function O(){return e.jsxs("div",{className:" relative flex flex-col gap-5 w-full h-screen p-7",children:[e.jsx("div",{className:" flex justify-center gap-2 w-full ",children:e.jsxs("div",{className:" flex justify-between items-center w-full max-w-[1400px] ",children:[e.jsxs(p,{to:"/login",className:" flex items-center w-full  ",children:[e.jsx("img",{className:" w-14 aspect-square ",src:"/logo.png",alt:"Logo de GV-Maps"}),e.jsx("h1",{className:" uppercase text-2xl  ",children:"GV-Maps"})]}),e.jsxs("div",{className:" flex items-center text-blue-800 ",children:[e.jsx("span",{className:" text-center leading-4 ",children:"Modo Vista"}),e.jsx(h,{className:" text-xl ",icon:m})]})]})}),e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("div",{className:" flex w-full max-w-[1400px] h-full rounded-2xl shadow-xl overflow-hidden bg-white ",children:e.jsx(L,{})})})]})}function L(){const{map_id:s}=f(),[t,a]=o.useState(null),[n,c]=o.useState(null);return o.useEffect(()=>{P(s).then(l=>{var i,r;a((i=l==null?void 0:l.data)==null?void 0:i.markers),c((r=l==null?void 0:l.data)==null?void 0:r.fibers)})},[s]),e.jsxs(M,{className:j(" flex w-full h-full cursor-pointer "),center:{lat:-2.3093213892775175,lng:-78.12541130262117},zoom:16,style:{height:"100%",width:"100%"},children:[e.jsx(N,{}),e.jsx(k,{markers:t}),e.jsx(E,{fibers:n})]})}function k({markers:s}){if(!(!s||s===null))return s.map(t=>{const a=Object.values(u).find(n=>n.name===t.type);return e.jsx(v,{position:{lat:t.latitude,lng:t.longitude},icon:g({width:45,height:45,icon:a.icon}),children:e.jsx(x,{children:t.name_auto})},t.id)})}function E({fibers:s}){if(!(!s||s===null))return s==null?void 0:s.map(t=>{var c;const a=(c=t==null?void 0:t.fiber_markers)==null?void 0:c.map(l=>({lat:l.latitude,lng:l.longitude})),n=Object.values(u).find(l=>l.name===t.type);return e.jsx(y,{pathOptions:{color:n.color},positions:a,weight:n.weight,children:e.jsx(x,{children:w(a)})},t.id)})}export{O as default};
