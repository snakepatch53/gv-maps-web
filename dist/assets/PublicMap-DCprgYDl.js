import{g as h,j as e,L as j,F as m,d as f,M as g,u as w,r as u,c as M,t as d,h as v,i as y}from"./index-CMEuing7.js";import{M as N,a as L,L as P,b as O,P as x,c as F,d as E}from"./MapLayerControl-BDKcxcjN.js";async function b(n){return await h({resource:"combos/get-public-map/"+n,all:!0})}const{Overlay:p}=E;function A(){return e.jsxs("div",{className:" relative flex flex-col gap-5 w-full h-screen p-7",children:[e.jsx("div",{className:" flex justify-center gap-2 w-full ",children:e.jsxs("div",{className:" flex justify-between items-center w-full max-w-[1400px] ",children:[e.jsxs(j,{to:"/login",className:" flex items-center w-full  ",children:[e.jsx("img",{className:" w-14 aspect-square ",src:"/logo.png",alt:"Logo de GV-Maps"}),e.jsx("h1",{className:" uppercase text-2xl  ",children:"GV-Maps"})]}),e.jsxs("div",{className:" flex items-center text-blue-800 ",children:[e.jsx("span",{className:" text-center leading-4 ",children:"Modo Vista"}),e.jsx(m,{className:" text-xl ",icon:f})]})]})}),e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("div",{className:" flex w-full max-w-[1400px] h-full rounded-2xl shadow-xl overflow-hidden bg-white ",children:e.jsx(g,{children:e.jsx(C,{})})})})]})}function C(){const{map_id:n}=w(),[o,s]=u.useState(null),[t,a]=u.useState(null);return u.useEffect(()=>{b(n).then(l=>{var r,c;s((r=l==null?void 0:l.data)==null?void 0:r.markers),a((c=l==null?void 0:l.data)==null?void 0:c.fibers)})},[n]),e.jsx(N,{className:M(" flex w-full h-full cursor-pointer "),center:{lat:-2.3093213892775175,lng:-78.12541130262117},zoom:16,style:{height:"100%",width:"100%"},children:e.jsxs(L,{children:[e.jsx(G,{markers:o}),e.jsx(T,{fibers:t})]})})}function G({markers:n}){if(!n||n===null)return;const o=n.reduce((s,t)=>(s[t.type]||(s[t.type]=[]),s[t.type].push(t),s),{});return Object.entries(o).map(([s,t])=>{const a=Object.values(d).find(l=>l.name===s);return e.jsx(p,{name:s+"'s ("+(t==null?void 0:t.length)+")",checked:!0,children:e.jsx(P,{children:t.map(l=>e.jsx(O,{position:{lat:l.latitude,lng:l.longitude},icon:v({width:45,height:45,icon:a.icon}),children:e.jsx(x,{children:l.name_auto})},l.id))})},s)})}function T({fibers:n}){if(!n||n===null)return;const o=n.reduce((s,t)=>(s[t.type]||(s[t.type]=[]),s[t.type].push(t),s),{});return Object.entries(o).map(([s,t])=>e.jsx(p,{name:s+"'s ("+(t==null?void 0:t.length)+")",checked:!0,children:t.map(a=>{var c;const l=(c=a==null?void 0:a.fiber_markers)==null?void 0:c.map(i=>({lat:i.latitude,lng:i.longitude})),r=Object.values(d).find(i=>i.name===s);return e.jsx(F,{pathOptions:{color:r.color},positions:l,weight:r.weight,children:e.jsx(x,{children:y(l)})},a.id)})},s))}export{A as default};
