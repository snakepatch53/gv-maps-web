import{h as o,j as e,P as M,i as B,k as I,l as V}from"./index-DZ6om5J-.js";import{u as R,C as U,a as z,b as G,c as E,d as H,B as j,e as _,f as t,g as J,h as K}from"./useCrudPanel-1Sntz5PG.js";const n="entities";function Q(r){return r.map(({...s})=>({...s}))}async function W(){const r=await o({resource:n});return Q(r)}async function X({data:r}){return await o({resource:n,data:r,method:"POST",all:!0,formData:!0})}async function Y({id:r,data:s}){return await o({resource:n+"/"+r,data:s,method:"POST",all:!0,formData:!0})}async function Z({id:r}){return await o({resource:n+"/"+r,method:"DELETE",all:!0})}function ae(){const r=(a,i,{isEmail:L})=>{var c,p,m,x,h,b,f,C;let l=!0;return(c=a.password)!=null&&c.value&&((m=(p=a.password)==null?void 0:p.value)==null?void 0:m.length)<8&&(i("La contrase単a debe tener minimo 8 caracteres"),l=!1),(h=(x=a.photo)==null?void 0:x.files)!=null&&h.length&&((f=(b=a.photo)==null?void 0:b.files[0])==null?void 0:f.size)>2e6&&(i("La foto debe pesar maximo 2MB"),l=!1),L((C=a.email)==null?void 0:C.value)||(i("El correo electronico no es valido"),l=!1),l},{entityName:s,pluralEntityName:d,head:g,table:v,form:y,confirm:T,progress:w,datalist:D,$form:O,handleModeNew:P,handleModeEdit:k,handleModeDelete:q,hanleCancel:u,handleSubmit:N,handleDelete:F,searchValue:S,searchOnChange:A}=R({entityName:"Empresa",pluralEntityName:"Empresas",searchFields:["name"],extraValidations:r,isStorageMultipartFormData:!0,isUpdateMultipartFormData:!0,crudGet:W,crudStorage:X,crudUpdate:Y,crudDestroy:Z});return e.jsxs(M,{className:" flex flex-col gap-7 w-full p-10 ",children:[e.jsx(U,{title:d,icon:B,isOpen:g,onClickNew:P,searchValue:S,searchOnChange:A}),e.jsx(z,{titles:["Logo","Nombre","Email"],dataList:D,isOpen:v,onRowPrint:a=>e.jsxs("tr",{children:[e.jsx(G,{src:a.logo_url,alt:"Logo de "+a.name}),e.jsx(E,{value:a.name}),e.jsx(E,{value:a.email}),e.jsxs(H,{children:[e.jsx(j,{text:"Editar",icon:I,type:"edit",onClick:()=>k(a)}),e.jsx(j,{text:"Borrar",icon:V,type:"delete",onClick:()=>q(a)})]})]},a.id)}),e.jsxs(_,{title:s,isOpen:y,onClickCancel:u,onSubmit:N,formRef:O,children:[e.jsx(t,{label:"Nombres",placeholder:"Escriba los nombres",name:"name",required:!0}),e.jsx(t,{label:"Apellidos",placeholder:"Escriba los apellidos",name:"lastname",required:!0}),e.jsx(t,{label:"Celular",placeholder:"Escriba su numero de celular",name:"phone",required:!0}),e.jsx(t,{label:"Direccion",placeholder:"Escriba una direccion",name:"address",required:!0}),e.jsx(t,{label:"Correo Electronico",placeholder:"Escriba el correo electronico",name:"email",required:!0}),e.jsx(t,{label:"Contrase単a",placeholder:"Escriba la contrase単a",type:"password",name:"password",required:!0}),e.jsx(t,{name:"role",label:"Privilegios",type:"radio",radioOptions:[{value:"Administrador",label:"Administrador",checked:!0},{value:"Vendedor",label:"Vendedor"},{value:"Cliente",label:"Cliente"}],required:!0}),e.jsx(t,{name:"state",label:"Estado",type:"radio",radioOptions:[{value:"Activo",label:"Activo",checked:!0},{value:"Inactivo",label:"Inactivo"}],required:!0}),e.jsx(t,{label:"Foto",name:"photo",type:"file"})]}),e.jsx(J,{isOpen:T,text:"多Seguro de eliminar este usuario?",onClickDelete:F,onClickCancel:u}),e.jsx(K,{isOpen:w,text:"Procesando tu solicitud..."})]})}export{ae as default};
